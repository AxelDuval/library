{% extends 'base.html.twig' %}

{% block title %}
Les Livres

{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css">
{% endblock %}

{% block javascripts %}
<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
<script type="text/javascript">

	$(document).ready(function () {
		$('#books').DataTable({
			language: {
				processing: "Traitement en cours...",
				search: "Rechercher&nbsp;:",
				lengthMenu: "Afficher _MENU_ &eacute;l&eacute;ments",
				info: "Affichage de l'&eacute;lement _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",
				infoEmpty: "Affichage de l'&eacute;lement 0 &agrave; 0 sur 0 &eacute;l&eacute;ments",
				infoFiltered: "(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",
				infoPostFix: "",
				loadingRecords: "Chargement en cours...",
				zeroRecords: "Aucun &eacute;l&eacute;ment &agrave; afficher",
				emptyTable: "Aucune donnée disponible dans le tableau",
				paginate: {
					first: "Premier",
					previous: "Pr&eacute;c&eacute;dent",
					next: "Suivant",
					last: "Dernier"
				},
				aria: {
					sortAscending: ": activer pour trier la colonne par ordre croissant",
					sortDescending: ": activer pour trier la colonne par ordre décroissant"
				}
			}
		});
	});
</script>
{% endblock %}

{% block body %}
{% for message in app.flashes('success') %}
<div class="alert alert-success">
	{{ message }}
</div>
{% endfor %}
{% for message in app.flashes('danger') %}
<div class="alert alert-danger">
	{{ message }}
</div>
{% endfor %} #}
<style>
	.example-wrapper {
		margin: 1em auto;
		max-width: 800px;
		width: 95%;
		font: 18px / 1.5 sans-serif;
	}

	.example-wrapper code {
		background: #F5F5F5;
		padding: 2px 6px;
	}
</style>

{# {% if is_granted('IS_AUTHENTICATED_FULLY') %}
<p>Email : {{ app.user.email }}</p>
<p>Nom : {{ app.user.firstname }} {{ app.user.lastname }}</p>
{% if app.user.getImageName() %}
<img class="w-25" src='/todolist/avatar/{{app.user.getImageName()}}'> <br>
{% endif %}
{% endif %} #}

{% for message in app.flashes('success') %}
<div class="alert alert-success">
	{{ message }}
</div>
{% endfor %}

<div class="example-wrapper">

	<h1>
		Les livres
	</h1>
	<a href="{{ path('book_create') }}">
		Ajouter
	</a>

	<table id="books" class="table">
		<thead>
			<tr>
				<th scope="col">
					Image
				</th>
				<th scope="col">
					Titre
				</th>
				<th scope="col">
					Auteur
				</th>
				<th scope="col">
					Disponibilité
				</th>
				<th scope="col">
					Emprunteur
				</th>
				<th scope="col">
					Catégorie

				</th>
				<th scope="col"></th>
				<th scope="col"></th>

			</tr>
		</thead>
		<tbody>
			<tr>
				{% for book in books %}
				<th scope="row">
			<img src="{{ book.getImageName() }}"></img>
				</th>
				<td>
					{{ book.getTitle() }}
				</td>
				<td>
					{{ book.getAuthor() }}
				</td>
				<td>
					{% if book.getStatus() %}
					Disponible
					{% else %}
					Indisponible
					{% endif %}
				</td>
				<td>
					{% if (book.getlastUser() != null) %}
					{{ book.getLastUser().getLastName() }}
					{% endif %}
				</td>

				<td>
					{{ book.getCategory() }}
				</td>

				<td>
					<a href="edit/{{ book.getId() }}" class="btn btn-warning">
						Modifier
					</a>
				</td>

				<td>
					{% if (book.getlastUser() != null) %}
					<a href="return/{{ book.getId() }}" class="btn btn-primary">
						Rendu
					</a>
					{% endif %}

				</td>

				{# <td>
					<a href="delete/{{ book.getId() }}" class="btn btn-danger">
						Supprimer
					</a>
				</td> #}

			</tr>
			{% endfor %}
		</tbody>
	</table>

</div>
{% endblock %}